import groovy.json.JsonOutput
pipeline{
    agent none
    stages{
        stage('Example'){
            steps{
                echo 'hello world okk'
            }
        }
        stage('Master Branch'){
            when{
                branch 'master'
            }
            steps{
                echo 'master commit'
            }
        }
        stage('Feature Branch'){
            when{
                branch 'feature'
            }
            steps{
                echo 'feature commit'
            }
        }
        stage('Get'){
            steps{
                script{
                    def url = new URL("http://localhost:8888/jenkinsApi/postData")
                    def conn = url.openConnection()
                    conn.setRequestMethod("GET")
                    conn.setRequestProperty("Content-Type", "application/json")
                    conn.connect()
                    def code = conn.getResponseCode()
                    println conn.content.text
                    println code
                }
            }
        }
    }
}